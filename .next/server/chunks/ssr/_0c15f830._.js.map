{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 12, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/BUNNY/Desktop/trek_scope/src/lib/data.ts"],"sourcesContent":["import type { Trek, TrekDifficulty } from './types';\r\n\r\n// Load initial dataset from JSON (Nepal-only dataset)\r\nimport treksJson from './treks.json';\r\n\r\nlet treks: Trek[] = (treksJson as unknown) as Trek[];\r\n\r\nexport function getAllTreks(): Trek[] {\r\n  return treks;\r\n}\r\n\r\nexport function getTrekBySlug(slug: string): Trek | undefined {\r\n  return treks.find((trek) => trek.slug === slug);\r\n}\r\n\r\nexport function getTreksByAgency(agencyId: string): Trek[] {\r\n  return treks.filter((trek) => trek.agencyId === agencyId);\r\n}\r\n\r\nexport function getFeaturedTreks(count: number): Trek[] {\r\n  return treks.slice(0, count);\r\n}\r\n\r\n// Mutation helpers for simple in-memory CRUD (dev only)\r\nexport async function addTrek(trek: Omit<Trek, 'id'>): Promise<Trek> {\r\n  const id = String(Date.now());\r\n  const newTrek: Trek = { id, ...trek } as Trek;\r\n  treks.push(newTrek);\r\n  return newTrek;\r\n}\r\n\r\nexport async function updateTrek(id: string, patch: Partial<Trek>, userRole?: string, agencyId?: string): Promise<Trek | undefined> {\r\n  const idx = treks.findIndex(t => t.id === id);\r\n  if (idx === -1) return undefined;\r\n  \r\n  const trek = treks[idx];\r\n  \r\n  // Permission check: admins can edit any trek, agencies can only edit their own\r\n  if (userRole === 'agency' && trek.agencyId !== agencyId) {\r\n    return undefined; // Unauthorized\r\n  }\r\n  \r\n  treks[idx] = { ...treks[idx], ...patch };\r\n  return treks[idx];\r\n}\r\n\r\nexport async function deleteTrek(id: string, userRole?: string, agencyId?: string): Promise<boolean> {\r\n  const idx = treks.findIndex(t => t.id === id);\r\n  if (idx === -1) return false;\r\n  \r\n  const trek = treks[idx];\r\n  \r\n  // Permission check: admins can delete any trek, agencies can only delete their own\r\n  if (userRole === 'agency' && trek.agencyId !== agencyId) {\r\n    return false; // Unauthorized\r\n  }\r\n  \r\n  treks.splice(idx, 1);\r\n  return true;\r\n}\r\n\r\nexport const difficulties: TrekDifficulty[] = ['Easy', 'Moderate', 'Challenging', 'Expert'];\r\nexport const regions = [...new Set(treks.map(t => t.region))];\r\n"],"names":[],"mappings":";;;;;;;;;;;AAEA,sDAAsD;AACtD;;AAEA,IAAI,QAAiB,2FAAA,CAAA,UAAS;AAEvB,SAAS;IACd,OAAO;AACT;AAEO,SAAS,cAAc,IAAY;IACxC,OAAO,MAAM,IAAI,CAAC,CAAC,OAAS,KAAK,IAAI,KAAK;AAC5C;AAEO,SAAS,iBAAiB,QAAgB;IAC/C,OAAO,MAAM,MAAM,CAAC,CAAC,OAAS,KAAK,QAAQ,KAAK;AAClD;AAEO,SAAS,iBAAiB,KAAa;IAC5C,OAAO,MAAM,KAAK,CAAC,GAAG;AACxB;AAGO,eAAe,QAAQ,IAAsB;IAClD,MAAM,KAAK,OAAO,KAAK,GAAG;IAC1B,MAAM,UAAgB;QAAE;QAAI,GAAG,IAAI;IAAC;IACpC,MAAM,IAAI,CAAC;IACX,OAAO;AACT;AAEO,eAAe,WAAW,EAAU,EAAE,KAAoB,EAAE,QAAiB,EAAE,QAAiB;IACrG,MAAM,MAAM,MAAM,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAC1C,IAAI,QAAQ,CAAC,GAAG,OAAO;IAEvB,MAAM,OAAO,KAAK,CAAC,IAAI;IAEvB,+EAA+E;IAC/E,IAAI,aAAa,YAAY,KAAK,QAAQ,KAAK,UAAU;QACvD,OAAO,WAAW,eAAe;IACnC;IAEA,KAAK,CAAC,IAAI,GAAG;QAAE,GAAG,KAAK,CAAC,IAAI;QAAE,GAAG,KAAK;IAAC;IACvC,OAAO,KAAK,CAAC,IAAI;AACnB;AAEO,eAAe,WAAW,EAAU,EAAE,QAAiB,EAAE,QAAiB;IAC/E,MAAM,MAAM,MAAM,SAAS,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IAC1C,IAAI,QAAQ,CAAC,GAAG,OAAO;IAEvB,MAAM,OAAO,KAAK,CAAC,IAAI;IAEvB,mFAAmF;IACnF,IAAI,aAAa,YAAY,KAAK,QAAQ,KAAK,UAAU;QACvD,OAAO,OAAO,eAAe;IAC/B;IAEA,MAAM,MAAM,CAAC,KAAK;IAClB,OAAO;AACT;AAEO,MAAM,eAAiC;IAAC;IAAQ;IAAY;IAAe;CAAS;AACpF,MAAM,UAAU;OAAI,IAAI,IAAI,MAAM,GAAG,CAAC,CAAA,IAAK,EAAE,MAAM;CAAG","debugId":null}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/BUNNY/Desktop/trek_scope/src/ai/flows/smart-trek-recommendation.ts"],"sourcesContent":["'use server';\r\n\r\nimport { z } from 'zod';\r\nimport { getAllTreks } from '@/lib/data';\r\nimport type { Trek } from '@/lib/types';\r\n\r\nconst RecommendTrekInputSchema = z.object({\r\n  preferredRegion: z.string(),\r\n  desiredDifficultyLevel: z.string(),\r\n  idealTravelDates: z.string(),\r\n  otherPreferences: z.string().optional(),\r\n});\r\nexport type RecommendTrekInput = z.infer<typeof RecommendTrekInputSchema>;\r\n\r\nconst RecommendTrekOutputSchema = z.object({\r\n  trekRecommendations: z.array(\r\n    z.object({\r\n      id: z.string().optional(),\r\n      trekName: z.string(),\r\n      region: z.string(),\r\n      difficulty: z.string(),\r\n      duration: z.string().or(z.number()),\r\n      description: z.string(),\r\n      matchReason: z.string().optional(),\r\n      priceRange: z.array(z.number()).optional(),\r\n    })\r\n  ),\r\n});\r\nexport type RecommendTrekOutput = z.infer<typeof RecommendTrekOutputSchema>;\r\n\r\nexport async function recommendTrek(input: RecommendTrekInput): Promise<RecommendTrekOutput> {\r\n  try {\r\n    const filteredTreks = filterTreksByPreferences(input);\r\n    if (filteredTreks.length === 0) {\r\n      const allTreks = getAllTreks();\r\n      return {\r\n        trekRecommendations: allTreks.slice(0, 3).map((trek: Trek) => ({\r\n          id: trek.id,\r\n          trekName: trek.name,\r\n          region: trek.region,\r\n          difficulty: trek.difficulty,\r\n          duration: `${trek.duration} days`,\r\n          description: trek.overview || 'Explore this trek in Nepal.',\r\n          matchReason: 'Popular trek',\r\n          priceRange: trek.price_range,\r\n        })),\r\n      };\r\n    }\r\n    const scoredTreks = scoreTreks(filteredTreks, input);\r\n    return {\r\n      trekRecommendations: scoredTreks.slice(0, 3).map(({ trek, reason }) => ({\r\n        id: trek.id,\r\n        trekName: trek.name,\r\n        region: trek.region,\r\n        difficulty: trek.difficulty,\r\n        duration: `${trek.duration} days`,\r\n        description: trek.overview || 'Trek experience',\r\n        matchReason: reason,\r\n        priceRange: trek.price_range,\r\n      })),\r\n    };\r\n  } catch (error) {\r\n    console.error('Error:', error);\r\n    const allTreks = getAllTreks();\r\n    return {\r\n      trekRecommendations: allTreks.slice(0, 3).map((trek: Trek) => ({\r\n        id: trek.id,\r\n        trekName: trek.name,\r\n        region: trek.region,\r\n        difficulty: trek.difficulty,\r\n        duration: `${trek.duration} days`,\r\n        description: trek.overview || 'Trek',\r\n      })),\r\n    };\r\n  }\r\n}\r\n\r\nfunction filterTreksByPreferences(input: RecommendTrekInput): Trek[] {\r\n  let filtered = [...getAllTreks()];\r\n  const regionKeywords = input.preferredRegion.toLowerCase().split(' ');\r\n  filtered = filtered.filter((trek: Trek) =>\r\n    regionKeywords.some((kw: string) =>\r\n      trek.region.toLowerCase().includes(kw) || trek.name.toLowerCase().includes(kw)\r\n    )\r\n  );\r\n  const diffMatch = input.desiredDifficultyLevel.toLowerCase();\r\n  filtered = filtered.filter((trek: Trek) =>\r\n    trek.difficulty.toLowerCase().includes(diffMatch)\r\n  );\r\n  const month = extractMonth(input.idealTravelDates);\r\n  if (month) {\r\n    filtered = filtered.filter((trek: Trek) =>\r\n      trek.best_season?.some((s: string) => {\r\n        const seasonLower = s.toLowerCase();\r\n        // Check if month is in season string (e.g., \"autumn (sep-nov)\" contains \"october\")\r\n        return isMonthInSeason(month, seasonLower);\r\n      })\r\n    );\r\n  }\r\n  return filtered;\r\n}\r\n\r\nfunction scoreTreks(treks: Trek[], input: RecommendTrekInput): Array<{ trek: Trek; score: number; reason: string }> {\r\n  return treks.map((trek: Trek) => {\r\n    let score = 0;\r\n    const reasons: string[] = [];\r\n    if (trek.region.toLowerCase().includes(input.preferredRegion.toLowerCase())) {\r\n      score += 25;\r\n      reasons.push(`Located in ${trek.region}`);\r\n    }\r\n    if (trek.difficulty.toLowerCase().includes(input.desiredDifficultyLevel.toLowerCase())) {\r\n      score += 25;\r\n      reasons.push(`${trek.difficulty} level`);\r\n    }\r\n    const month = extractMonth(input.idealTravelDates);\r\n    if (month && trek.best_season?.some((s: string) => isMonthInSeason(month, s.toLowerCase()))) {\r\n      score += 20;\r\n      reasons.push(`Best in ${month}`);\r\n    }\r\n    if (trek.duration >= 5 && trek.duration <= 10) score += 10;\r\n    return { trek, score, reason: reasons.join(', ') || 'Great match' };\r\n  }).sort((a, b) => b.score - a.score);\r\n}\r\n\r\nfunction extractMonth(dateString: string): string | null {\r\n  const months = ['january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december', 'jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'sept', 'oct', 'nov', 'dec'];\r\n  const lower = dateString.toLowerCase();\r\n  for (const month of months) {\r\n    if (lower.includes(month)) return month;\r\n  }\r\n  return null;\r\n}\r\n\r\nfunction isMonthInSeason(month: string, seasonStr: string): boolean {\r\n  // Normalize month\r\n  const monthMap: Record<string, number> = {\r\n    'january': 1, 'jan': 1,\r\n    'february': 2, 'feb': 2,\r\n    'march': 3, 'mar': 3,\r\n    'april': 4, 'apr': 4,\r\n    'may': 5,\r\n    'june': 6, 'jun': 6,\r\n    'july': 7, 'jul': 7,\r\n    'august': 8, 'aug': 8,\r\n    'september': 9, 'sep': 9, 'sept': 9,\r\n    'october': 10, 'oct': 10,\r\n    'november': 11, 'nov': 11,\r\n    'december': 12, 'dec': 12,\r\n  };\r\n\r\n  const monthNum = monthMap[month.toLowerCase()];\r\n  if (!monthNum) return false;\r\n\r\n  // Season patterns: \"Spring (Mar-May)\", \"Autumn (Sep-Nov)\", etc.\r\n  const patterns = [\r\n    { season: 'spring', months: [3, 4, 5] },\r\n    { season: 'summer', months: [6, 7, 8] },\r\n    { season: 'autumn', months: [9, 10, 11] },\r\n    { season: 'fall', months: [9, 10, 11] },\r\n    { season: 'winter', months: [12, 1, 2] },\r\n  ];\r\n\r\n  for (const pattern of patterns) {\r\n    if (seasonStr.includes(pattern.season) && pattern.months.includes(monthNum)) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  // Direct month abbreviation match in season string\r\n  for (const [name, num] of Object.entries(monthMap)) {\r\n    if (num === monthNum && (seasonStr.includes(name) || seasonStr.includes(name.slice(0, 3)))) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  return false;\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 338, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/BUNNY/Desktop/trek_scope/src/lib/actions.ts"],"sourcesContent":["'use server';\r\n\r\nimport { z } from 'zod';\r\nimport { recommendTrek } from '@/ai/flows/smart-trek-recommendation';\r\nimport type { RecommendTrekOutput } from '@/ai/flows/smart-trek-recommendation';\r\n\r\nconst inquirySchema = z.object({\r\n  fullName: z.string().min(2, 'Full name is required.'),\r\n  email: z.string().email('Invalid email address.'),\r\n  phone: z.string().optional(),\r\n  trekName: z.string(),\r\n  preferredDates: z.string().min(1, 'Preferred dates are required.'),\r\n  groupSize: z.coerce.number().min(1, 'Group size must be at least 1.'),\r\n  notes: z.string().optional(),\r\n});\r\n\r\nexport async function submitInquiry(prevState: any, formData: FormData) {\r\n  const validatedFields = inquirySchema.safeParse(\r\n    Object.fromEntries(formData.entries())\r\n  );\r\n\r\n  if (!validatedFields.success) {\r\n    return {\r\n      errors: validatedFields.error.flatten().fieldErrors,\r\n      message: 'Please correct the errors below.',\r\n    };\r\n  }\r\n\r\n  const data = validatedFields.data;\r\n\r\n  // Here you would typically save to Firestore and send an email notification.\r\n  // For now, we'll just log it to the console.\r\n  console.log('New Inquiry Submitted:', data);\r\n\r\n  return {\r\n    message: 'Your inquiry has been submitted successfully!',\r\n    errors: {},\r\n    success: true,\r\n  };\r\n}\r\n\r\nconst recommendationSchema = z.object({\r\n  preferredRegion: z.string().min(1, 'Preferred region is required.'),\r\n  desiredDifficultyLevel: z.string().min(1, 'Difficulty level is required.'),\r\n  idealTravelDates: z.string().min(1, 'Travel dates are required.'),\r\n  otherPreferences: z.string().optional(),\r\n});\r\n\r\nexport type RecommendationFormState = {\r\n  message?: string;\r\n  errors?: {\r\n    preferredRegion?: string[];\r\n    desiredDifficultyLevel?: string[];\r\n    idealTravelDates?: string[];\r\n    otherPreferences?: string[];\r\n    _form?: string[];\r\n  };\r\n  recommendations?: RecommendTrekOutput['trekRecommendations'];\r\n};\r\n\r\nexport async function getTrekRecommendation(\r\n  prevState: RecommendationFormState,\r\n  formData: FormData\r\n): Promise<RecommendationFormState> {\r\n  try {\r\n    const validatedFields = recommendationSchema.safeParse(\r\n      Object.fromEntries(formData.entries())\r\n    );\r\n\r\n    if (!validatedFields.success) {\r\n      return {\r\n        errors: validatedFields.error.flatten().fieldErrors,\r\n      };\r\n    }\r\n    \r\n    const result = await recommendTrek(validatedFields.data);\r\n\r\n    if (!result || result.trekRecommendations.length === 0) {\r\n      return {\r\n        message:\r\n          \"We couldn't find any treks matching your criteria. Please try adjusting your preferences.\",\r\n      };\r\n    }\r\n\r\n    return { recommendations: result.trekRecommendations };\r\n  } catch (error) {\r\n    console.error('Error getting trek recommendation:', error);\r\n    return {\r\n      errors: {\r\n        _form: [\r\n          'An unexpected error occurred. Please try again later.',\r\n        ],\r\n      },\r\n    };\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAEA;AACA;;;;;;AAGA,MAAM,gBAAgB,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC7B,UAAU,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC5B,OAAO,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,OAAO,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;IAC1B,UAAU,oIAAA,CAAA,IAAC,CAAC,MAAM;IAClB,gBAAgB,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAClC,WAAW,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACpC,OAAO,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;AAC5B;AAEO,eAAe,cAAc,SAAc,EAAE,QAAkB;IACpE,MAAM,kBAAkB,cAAc,SAAS,CAC7C,OAAO,WAAW,CAAC,SAAS,OAAO;IAGrC,IAAI,CAAC,gBAAgB,OAAO,EAAE;QAC5B,OAAO;YACL,QAAQ,gBAAgB,KAAK,CAAC,OAAO,GAAG,WAAW;YACnD,SAAS;QACX;IACF;IAEA,MAAM,OAAO,gBAAgB,IAAI;IAEjC,6EAA6E;IAC7E,6CAA6C;IAC7C,QAAQ,GAAG,CAAC,0BAA0B;IAEtC,OAAO;QACL,SAAS;QACT,QAAQ,CAAC;QACT,SAAS;IACX;AACF;AAEA,MAAM,uBAAuB,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACpC,iBAAiB,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACnC,wBAAwB,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAC1C,kBAAkB,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACpC,kBAAkB,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,QAAQ;AACvC;AAcO,eAAe,sBACpB,SAAkC,EAClC,QAAkB;IAElB,IAAI;QACF,MAAM,kBAAkB,qBAAqB,SAAS,CACpD,OAAO,WAAW,CAAC,SAAS,OAAO;QAGrC,IAAI,CAAC,gBAAgB,OAAO,EAAE;YAC5B,OAAO;gBACL,QAAQ,gBAAgB,KAAK,CAAC,OAAO,GAAG,WAAW;YACrD;QACF;QAEA,MAAM,SAAS,MAAM,CAAA,GAAA,qJAAA,CAAA,gBAAa,AAAD,EAAE,gBAAgB,IAAI;QAEvD,IAAI,CAAC,UAAU,OAAO,mBAAmB,CAAC,MAAM,KAAK,GAAG;YACtD,OAAO;gBACL,SACE;YACJ;QACF;QAEA,OAAO;YAAE,iBAAiB,OAAO,mBAAmB;QAAC;IACvD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sCAAsC;QACpD,OAAO;YACL,QAAQ;gBACN,OAAO;oBACL;iBACD;YACH;QACF;IACF;AACF;;;IA/EsB;IA4CA;;AA5CA,+OAAA;AA4CA,+OAAA","debugId":null}},
    {"offset": {"line": 425, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/BUNNY/Desktop/trek_scope/.next-internal/server/app/recommend/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {getTrekRecommendation as '60d9892a763318b8d458b0f97745f8c102dd6fc0d3'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 477, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/BUNNY/Desktop/trek_scope/src/components/forms/recommendation-form.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/forms/recommendation-form.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/forms/recommendation-form.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAgT,GAC7U,8EACA","debugId":null}},
    {"offset": {"line": 491, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/BUNNY/Desktop/trek_scope/src/components/forms/recommendation-form.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/forms/recommendation-form.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/forms/recommendation-form.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA4R,GACzT,0DACA","debugId":null}},
    {"offset": {"line": 505, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 515, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/BUNNY/Desktop/trek_scope/src/app/recommend/page.tsx"],"sourcesContent":["import RecommendationForm from '@/components/forms/recommendation-form';\r\n\r\nexport default function RecommendPage() {\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8 max-w-4xl\">\r\n      <div className=\"text-center mb-8\">\r\n        <h1 className=\"text-4xl md:text-5xl font-bold font-headline text-primary\">\r\n          Smart Trek Finder\r\n        </h1>\r\n        <p className=\"mt-2 text-lg text-muted-foreground\">\r\n          Let our AI help you find the perfect trek. Tell us what you're\r\n          looking for, and we'll provide personalized recommendations.\r\n        </p>\r\n      </div>\r\n      <div className=\"bg-card p-8 rounded-lg shadow-lg\">\r\n        <RecommendationForm />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;AAEe,SAAS;IACtB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA4D;;;;;;kCAG1E,8OAAC;wBAAE,WAAU;kCAAqC;;;;;;;;;;;;0BAKpD,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,qJAAA,CAAA,UAAkB;;;;;;;;;;;;;;;;AAI3B","debugId":null}}]
}