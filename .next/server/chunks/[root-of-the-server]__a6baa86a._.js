module.exports = {

"[project]/.next-internal/server/app/api/treks/route/actions.js [app-rsc] (server actions loader, ecmascript)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
}}),
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/@opentelemetry/api [external] (@opentelemetry/api, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("@opentelemetry/api", () => require("@opentelemetry/api"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/crypto [external] (crypto, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/action-async-storage.external.js [external] (next/dist/server/app-render/action-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/action-async-storage.external.js", () => require("next/dist/server/app-render/action-async-storage.external.js"));

module.exports = mod;
}}),
"[project]/src/lib/auth.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "auth": (()=>auth),
    "handlers": (()=>handlers),
    "signIn": (()=>signIn),
    "signOut": (()=>signOut)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2d$auth$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/next-auth/index.js [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2d$auth$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/next-auth/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2d$auth$2f$providers$2f$credentials$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/node_modules/next-auth/providers/credentials.js [app-route] (ecmascript) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$auth$2f$core$2f$providers$2f$credentials$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@auth/core/providers/credentials.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/zod/lib/index.mjs [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$crypto__$5b$external$5d$__$28$crypto$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/crypto [external] (crypto, cjs)");
;
;
;
;
function hashPassword(password) {
    // Using a fixed salt for consistency
    const FIXED_SALT = 'trek-mapper-salt';
    return __TURBOPACK__imported__module__$5b$externals$5d2f$crypto__$5b$external$5d$__$28$crypto$2c$__cjs$29$__["default"].createHash('sha256').update(password + FIXED_SALT).digest('hex');
}
function verifyPassword(password, hash) {
    return hashPassword(password) === hash;
}
// Define authorized users (in production, query from database)
const AUTHORIZED_USERS = {
    admin: {
        id: 'admin-1',
        username: 'admin',
        role: 'admin',
        passwordHash: 'e4ae6e8363fce7076f69cdce2a655516c0a22f89008027633c6e2001cb1b3c37'
    },
    agency: {
        id: 'agency-1',
        username: 'agency',
        role: 'agency',
        passwordHash: '1f41d8716d4964201737e48c2a318ed9902d9e1fb0bf92c7c17582f5e28b98d4'
    }
};
const credentialsSchema = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].object({
    username: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().min(1, 'Username required'),
    password: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$zod$2f$lib$2f$index$2e$mjs__$5b$app$2d$route$5d$__$28$ecmascript$29$__["z"].string().min(1, 'Password required')
});
const config = {
    secret: process.env.AUTH_SECRET || process.env.NEXTAUTH_SECRET || 'dev-secret-key-change-in-production',
    trustHost: true,
    basePath: '/api/auth',
    pages: {
        signIn: '/admin/login',
        error: '/admin/login'
    },
    providers: [
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$auth$2f$core$2f$providers$2f$credentials$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["default"])({
            name: 'Credentials',
            credentials: {
                username: {
                    label: 'Username',
                    type: 'text',
                    placeholder: 'admin'
                },
                password: {
                    label: 'Password',
                    type: 'password'
                }
            },
            async authorize (credentials) {
                try {
                    // Validate input
                    const parsed = credentialsSchema.safeParse(credentials);
                    if (!parsed.success) {
                        console.error('Validation error:', parsed.error);
                        return null;
                    }
                    const { username, password } = parsed.data;
                    // Find user
                    const user = AUTHORIZED_USERS[username];
                    if (!user) {
                        console.warn(`Login attempt with unknown username: ${username}`);
                        return null;
                    }
                    // Verify password
                    if (!verifyPassword(password, user.passwordHash)) {
                        console.warn(`Failed login attempt for user: ${username}`);
                        return null;
                    }
                    // Return user object (never include password)
                    return {
                        id: user.id,
                        username: user.username,
                        role: user.role
                    };
                } catch (error) {
                    console.error('Auth error:', error);
                    return null;
                }
            }
        })
    ],
    callbacks: {
        // Add role to JWT token
        async jwt ({ token, user }) {
            if (user) {
                token.id = user.id;
                token.role = user.role;
            }
            return token;
        },
        // Add role to session
        async session ({ session, token }) {
            if (session.user) {
                session.user.id = token.id;
                session.user.role = token.role;
            }
            return session;
        },
        // Redirect after login
        async redirect ({ url, baseUrl }) {
            // Prevent open redirect vulnerability
            if (url.startsWith('/')) return `${baseUrl}${url}`;
            if (new URL(url).origin === baseUrl) return url;
            return baseUrl;
        }
    },
    events: {
        async signIn ({ user, account, profile, isNewUser }) {
            console.log(`User signed in: ${user.username} (${user.role})`);
        },
        async signOut () {
            console.log('User signed out');
        }
    },
    session: {
        strategy: 'jwt',
        maxAge: 24 * 60 * 60,
        updateAge: 60 * 60
    },
    jwt: {
        maxAge: 24 * 60 * 60
    },
    // Security: Enable secure cookies in production
    useSecureCookies: ("TURBOPACK compile-time value", "development") === 'production'
};
const { handlers, auth, signIn, signOut } = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2d$auth$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["default"])(config);
}}),
"[project]/src/lib/treks.json (json)": ((__turbopack_context__) => {

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.v(JSON.parse("[{\"id\":\"1\",\"slug\":\"everest-base-camp\",\"name\":\"Everest Base Camp\",\"region\":\"Khumbu\",\"difficulty\":\"Challenging\",\"duration\":14,\"altitude\":5364,\"price_range\":[1000,1500],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":true,\"highlights\":[\"Kala Patthar sunrise\",\"Tengboche Monastery\",\"Khumbu Glacier\"],\"itinerary\":[{\"day\":1,\"title\":\"Fly to Lukla, trek to Phakding\",\"description\":\"Flight to Lukla then easy trek to Phakding\",\"altitude\":2652},{\"day\":2,\"title\":\"Trek to Namche Bazaar\",\"description\":\"Steep climb to the Sherpa capital\",\"altitude\":3440}],\"images\":[\"everest-1\",\"everest-2\"],\"safety_tips\":[\"Acclimatize properly\",\"Hydrate well\",\"Walk slow and steady\"],\"map_embed_url\":\"\",\"coordinates\":[27.9881,86.925],\"description\":\"Classic trek to the foot of Mount Everest.\",\"overview\":\"A high-altitude trek through Sherpa country ending at Everest Base Camp.\",\"faq\":[{\"question\":\"Is prior trekking experience required?\",\"answer\":\"Yes, experience at altitude is recommended.\"}]},{\"id\":\"2\",\"slug\":\"gokyo-lakes\",\"name\":\"Gokyo Lakes & Gokyo Ri\",\"region\":\"Khumbu\",\"difficulty\":\"Challenging\",\"duration\":12,\"altitude\":5357,\"price_range\":[1100,2200],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":true,\"highlights\":[\"Gokyo Lakes\",\"Gokyo Ri panoramic views\",\"Cho La pass (optional)\"],\"itinerary\":[{\"day\":1,\"title\":\"Flight to Lukla, trek to Phakding\",\"altitude\":2652},{\"day\":5,\"title\":\"Reach Gokyo\",\"altitude\":4790}],\"images\":[\"gokyo-1\"],\"safety_tips\":[\"Watch for altitude on Gokyo Ri\"],\"map_embed_url\":\"\",\"coordinates\":[27.9535,86.7033],\"description\":\"Scenic lakes and panoramic mountain views in the Khumbu.\",\"overview\":\"Alternate route to Everest region with stunning turquoise lakes and high viewpoints.\",\"faq\":[]},{\"id\":\"3\",\"slug\":\"three-passes-eco\",\"name\":\"Everest Three Passes (extended)\",\"region\":\"Khumbu\",\"difficulty\":\"Expert\",\"duration\":18,\"altitude\":5364,\"price_range\":[2000,4000],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":true,\"highlights\":[\"Three high passes\",\"Remote high alpine camps\",\"Ama Dablam views\"],\"itinerary\":[],\"images\":[\"three-passes-1\"],\"safety_tips\":[\"Strong acclimatization plan required\"],\"map_embed_url\":\"\",\"coordinates\":[27.8991,86.8611],\"description\":\"Challenging circuit across three high passes in the Everest region.\",\"overview\":\"A demanding route for experienced trekkers seeking remote high passes.\",\"faq\":[]},{\"id\":\"4\",\"slug\":\"annapurna-circuit\",\"name\":\"Annapurna Circuit\",\"region\":\"Annapurna\",\"difficulty\":\"Challenging\",\"duration\":18,\"altitude\":5416,\"price_range\":[1000,2200],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":true,\"highlights\":[\"Thorong La Pass\",\"Diverse landscapes\",\"Muktinath\"],\"itinerary\":[],\"images\":[\"annapurna-1\"],\"safety_tips\":[\"Cross Thorong La early in the day\"],\"map_embed_url\":\"\",\"coordinates\":[28.5936,83.8756],\"description\":\"Classic long circuit around the Annapurna massif.\",\"overview\":\"Varied terrain and cultural diversity with a high mountain pass.\",\"faq\":[]},{\"id\":\"5\",\"slug\":\"annapurna-base-camp\",\"name\":\"Annapurna Base Camp (ABC)\",\"region\":\"Annapurna\",\"difficulty\":\"Moderate\",\"duration\":8,\"altitude\":4130,\"price_range\":[600,1200],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":true,\"highlights\":[\"Close-up views of Annapurna South\",\"Trekking through rhododendron forests\"],\"itinerary\":[],\"images\":[\"abc-1\"],\"safety_tips\":[\"Weather can change rapidly\"],\"map_embed_url\":\"\",\"coordinates\":[28.436,83.8236],\"description\":\"Popular trek to the base of Annapurna massif.\",\"overview\":\"Accessible route with varied scenery and mountain views.\",\"faq\":[]},{\"id\":\"6\",\"slug\":\"poon-hill\",\"name\":\"Poon Hill Trek\",\"region\":\"Annapurna\",\"difficulty\":\"Easy\",\"duration\":5,\"altitude\":3210,\"price_range\":[300,700],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\",\"Winter (Dec-Feb)\"],\"permit_required\":true,\"highlights\":[\"Poon Hill sunrise\",\"Ghorepani village\",\"Rhododendron forests\"],\"itinerary\":[],\"images\":[\"poon-hill-1\"],\"safety_tips\":[\"Dress in layers for sunrise\"],\"map_embed_url\":\"\",\"description\":\"Short popular trek ideal for quick mountain views.\",\"overview\":\"Great for beginners and families, famous for sunrise viewpoints.\",\"faq\":[],\"coordinates\":[28.610554116720568,84.0249985277842]},{\"id\":\"7\",\"slug\":\"mardi-himal\",\"name\":\"Mardi Himal Trek\",\"region\":\"Annapurna\",\"difficulty\":\"Moderate\",\"duration\":6,\"altitude\":4500,\"price_range\":[400,900],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":true,\"highlights\":[\"Mardi Himal viewpoint\",\"Quiet trails\"],\"itinerary\":[],\"images\":[\"mardi-1\"],\"safety_tips\":[],\"map_embed_url\":\"\",\"description\":\"Less-crowded Annapurna trek with excellent mountain views.\",\"overview\":\"Shorter alternative to ABC with high viewpoints.\",\"faq\":[],\"coordinates\":[28.57661507517552,84.1204980231608]},{\"id\":\"8\",\"slug\":\"manaslu-circuit\",\"name\":\"Manaslu Circuit\",\"region\":\"Manaslu\",\"difficulty\":\"Challenging\",\"duration\":14,\"altitude\":5160,\"price_range\":[1200,2600],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":true,\"highlights\":[\"Remote villages\",\"Larkya La pass\"],\"itinerary\":[],\"images\":[\"manaslu-1\"],\"safety_tips\":[\"Permit and guide requirements\"],\"map_embed_url\":\"\",\"description\":\"Wild and remote circuit around Manaslu peak.\",\"overview\":\"A quieter alternative to Annapurna with high passes and cultural richness.\",\"faq\":[],\"coordinates\":[28.49737812534264,84.63804569239277]},{\"id\":\"9\",\"slug\":\"kanchenjunga-base-camp\",\"name\":\"Kanchenjunga Base Camp\",\"region\":\"Taplejung\",\"difficulty\":\"Expert\",\"duration\":20,\"altitude\":5143,\"price_range\":[2200,4500],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":true,\"highlights\":[\"Remote trails\",\"Massive Kanchenjunga views\"],\"itinerary\":[],\"images\":[\"kanchenjunga-1\"],\"safety_tips\":[],\"map_embed_url\":\"\",\"description\":\"Very remote trek to the base of the world's third highest mountain.\",\"overview\":\"Long expedition-style trek across rugged terrain.\",\"faq\":[],\"coordinates\":[27.157251448342045,87.74352938220909]},{\"id\":\"10\",\"slug\":\"makalu-base-camp\",\"name\":\"Makalu Base Camp\",\"region\":\"Makalu\",\"difficulty\":\"Expert\",\"duration\":16,\"altitude\":5200,\"price_range\":[1800,3800],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":true,\"highlights\":[\"Remote high-altitude scenery\",\"Makalu views\"],\"itinerary\":[],\"images\":[\"makalu-1\"],\"safety_tips\":[],\"map_embed_url\":\"\",\"description\":\"Remote alpine trek with dramatic mountain views.\",\"overview\":\"Less-travelled route to Makalu region requiring good fitness.\",\"faq\":[],\"coordinates\":[27.963530499963156,87.48452591626749]},{\"id\":\"11\",\"slug\":\"langtang-gosaikunda\",\"name\":\"Langtang & Gosaikunda\",\"region\":\"Langtang\",\"difficulty\":\"Moderate\",\"duration\":7,\"altitude\":4380,\"price_range\":[500,1000],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":true,\"highlights\":[\"Alpine lakes\",\"Tamang culture\"],\"itinerary\":[],\"images\":[\"langtang-gosaikunda-1\"],\"safety_tips\":[],\"map_embed_url\":\"\",\"description\":\"Combines Langtang valley with holy alpine lakes at Gosaikunda.\",\"overview\":\"Great option for moderate trekkers near Kathmandu.\",\"faq\":[],\"coordinates\":[28.01401529587098,85.31167930982753]},{\"id\":\"12\",\"slug\":\"helambu\",\"name\":\"Helambu Trek\",\"region\":\"Helambu\",\"difficulty\":\"Easy\",\"duration\":5,\"altitude\":3600,\"price_range\":[200,500],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":false,\"highlights\":[\"Close to Kathmandu\",\"Tamang villages\"],\"itinerary\":[],\"images\":[\"helambu-1\"],\"safety_tips\":[],\"map_embed_url\":\"\",\"description\":\"Accessible trek north of Kathmandu through Tamang villages.\",\"overview\":\"Good short trek for acclimatization and cultural visits.\",\"faq\":[],\"coordinates\":[27.93518987441795,85.3640525889479]},{\"id\":\"13\",\"slug\":\"rolwaling-valley\",\"name\":\"Rolwaling Valley Trek\",\"region\":\"Rolwaling\",\"difficulty\":\"Challenging\",\"duration\":12,\"altitude\":5000,\"price_range\":[1200,2600],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":true,\"highlights\":[\"Remote glacial valleys\",\"Tamang culture\"],\"itinerary\":[],\"images\":[\"rolwaling-1\"],\"safety_tips\":[],\"map_embed_url\":\"\",\"description\":\"Remote valley with glaciers and alpine meadows.\",\"overview\":\"Less-visited region offering solitude and big mountain scenery.\",\"faq\":[],\"coordinates\":[28.01072783112999,86.47966795386077]},{\"id\":\"14\",\"slug\":\"upper-mustang\",\"name\":\"Upper Mustang (Lo Manthang)\",\"region\":\"Mustang\",\"difficulty\":\"Moderate\",\"duration\":10,\"altitude\":3840,\"price_range\":[900,2000],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":true,\"highlights\":[\"Tibetan-influenced desert landscapes\",\"Lo Manthang walled city\"],\"itinerary\":[],\"images\":[\"mustang-1\"],\"safety_tips\":[],\"map_embed_url\":\"\",\"description\":\"Ancient Tibetan kingdom with dramatic rain-shadow landscapes.\",\"overview\":\"Unique cultural and geological landscape on Nepal's northern plateau.\",\"faq\":[],\"coordinates\":[29.183719163625184,83.70786159024355]},{\"id\":\"15\",\"slug\":\"upper-dolpo\",\"name\":\"Upper Dolpo (Shey Phoksundo)\",\"region\":\"Dolpo\",\"difficulty\":\"Expert\",\"duration\":18,\"altitude\":5360,\"price_range\":[2000,4500],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":true,\"highlights\":[\"Shey Phoksundo Lake\",\"Remote Tibetan plateau\"],\"itinerary\":[],\"images\":[\"dolpo-1\"],\"safety_tips\":[],\"map_embed_url\":\"\",\"description\":\"Very remote trek across high plateaus to turquoise lakes.\",\"overview\":\"One of Nepal's most isolated and spectacular treks.\",\"faq\":[],\"coordinates\":[29.207985597521237,83.2194751824891]},{\"id\":\"16\",\"slug\":\"dhaulagiri-circuit\",\"name\":\"Dhaulagiri Circuit\",\"region\":\"Dhaulagiri\",\"difficulty\":\"Expert\",\"duration\":20,\"altitude\":5600,\"price_range\":[1800,3600],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":true,\"highlights\":[\"High passes\",\"Glacial valleys\"],\"itinerary\":[],\"images\":[\"dhaulagiri-1\"],\"safety_tips\":[],\"map_embed_url\":\"\",\"description\":\"Challenging long circuit around Dhaulagiri massif.\",\"overview\":\"Epic, remote trekking with high passes and remote villages.\",\"faq\":[],\"coordinates\":[28.511842996852135,83.52331539127634]},{\"id\":\"17\",\"slug\":\"jang-la-pass\",\"name\":\"Jomsom - Tilicho Lake\",\"region\":\"Annapurna\",\"difficulty\":\"Challenging\",\"duration\":12,\"altitude\":4920,\"price_range\":[800,1800],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":true,\"highlights\":[\"Tilicho Lake\",\"Kali Gandaki gorge\"],\"itinerary\":[],\"images\":[\"tilicho-1\"],\"safety_tips\":[],\"map_embed_url\":\"\",\"description\":\"Route to one of the world's highest lakes, Tilicho.\",\"overview\":\"High-altitude lake with dramatic scenery and remoteness.\",\"faq\":[],\"coordinates\":[28.697991821138743,84.12189424339327]},{\"id\":\"18\",\"slug\":\"pikey-peak\",\"name\":\"Pikey Peak Trek\",\"region\":\"Solukhumbu\",\"difficulty\":\"Moderate\",\"duration\":5,\"altitude\":4067,\"price_range\":[300,700],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":false,\"highlights\":[\"Panoramic views of Everest range\",\"Local Sherpa villages\"],\"itinerary\":[],\"images\":[\"pikey-1\"],\"safety_tips\":[],\"map_embed_url\":\"\",\"description\":\"Short trek with excellent mountain panoramas.\",\"overview\":\"Good acclimatization trek with cultural exposure.\",\"faq\":[],\"coordinates\":[27.300248478971454,86.74529276580411]},{\"id\":\"19\",\"slug\":\"chilankhaal\",\"name\":\"Ghandruk - Australian Camp Loop\",\"region\":\"Gandaki\",\"difficulty\":\"Easy\",\"duration\":4,\"altitude\":2600,\"price_range\":[150,400],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":false,\"highlights\":[\"Village culture\",\"Short scenic loops\"],\"itinerary\":[],\"images\":[\"ghandruk-1\"],\"safety_tips\":[],\"map_embed_url\":\"\",\"description\":\"Popular short trekking loop around Ghandruk.\",\"overview\":\"Ideal for families and short visits from Pokhara.\",\"faq\":[],\"coordinates\":[28.782322391545843,83.91709252550207]},{\"id\":\"20\",\"slug\":\"tamang-heritage-trail\",\"name\":\"Tamang Heritage Trail\",\"region\":\"Rasuwa\",\"difficulty\":\"Easy\",\"duration\":6,\"altitude\":3500,\"price_range\":[200,500],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":false,\"highlights\":[\"Tamang culture\",\"Close to Kathmandu\"],\"itinerary\":[],\"images\":[\"tamang-1\"],\"safety_tips\":[],\"map_embed_url\":\"\",\"description\":\"Cultural trek through Tamang villages near Kathmandu.\",\"overview\":\"Accessible trail with cultural insights and mountain views.\",\"faq\":[],\"coordinates\":[28.332171445047912,85.17131468815542]},{\"id\":\"21\",\"slug\":\"khumbu-cho-la\",\"name\":\"Cho La Pass (Gokyo - Everest link)\",\"region\":\"Khumbu\",\"difficulty\":\"Expert\",\"duration\":16,\"altitude\":5420,\"price_range\":[1500,3200],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":true,\"highlights\":[\"High glacier pass\",\"Remote crossing\"],\"itinerary\":[],\"images\":[\"chola-1\"],\"safety_tips\":[\"Glacier travel skills helpful\"],\"map_embed_url\":\"\",\"description\":\"High pass linking Gokyo lakes and Everest trails.\",\"overview\":\"Requires experience and good weather windows.\",\"faq\":[],\"coordinates\":[27.889478209204643,86.82167579007967]},{\"id\":\"22\",\"slug\":\"shiva-peak-loop\",\"name\":\"Shivapuri - Nagarkot Ridge\",\"region\":\"Central Nepal\",\"difficulty\":\"Easy\",\"duration\":2,\"altitude\":2760,\"price_range\":[50,150],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":false,\"highlights\":[\"Close to Kathmandu\",\"Sunrise views\"],\"itinerary\":[],\"images\":[\"shivapuri-1\"],\"safety_tips\":[],\"map_embed_url\":\"\",\"description\":\"Short ridge hike suitable as a day trip from Kathmandu.\",\"overview\":\"Popular for sunrise and quick nature escapes.\",\"faq\":[],\"coordinates\":[27.889907090899698,85.40453813553918]},{\"id\":\"23\",\"slug\":\"chitwan-to-kathmandu-loop\",\"name\":\"Bandipur - Ghalegaun Cultural Trail\",\"region\":\"Gandaki\",\"difficulty\":\"Easy\",\"duration\":3,\"altitude\":1600,\"price_range\":[100,300],\"best_season\":[\"All year\"],\"permit_required\":false,\"highlights\":[\"Hilltop villages\",\"Cultural homestays\"],\"itinerary\":[],\"images\":[\"bandipur-1\"],\"safety_tips\":[],\"map_embed_url\":\"\",\"description\":\"Short cultural trails with village homestays.\",\"overview\":\"Good for cultural immersion and light trekking.\",\"faq\":[],\"coordinates\":[28.96310434438809,83.6023662966894]},{\"id\":\"24\",\"slug\":\"kathmandu-fortress-walk\",\"name\":\"Chandragiri Hill Day Trek\",\"region\":\"Kathmandu Valley\",\"difficulty\":\"Easy\",\"duration\":1,\"altitude\":2551,\"price_range\":[30,100],\"best_season\":[\"All year\"],\"permit_required\":false,\"highlights\":[\"Cable car option\",\"Valley panoramas\"],\"itinerary\":[],\"images\":[\"chandragiri-1\"],\"safety_tips\":[],\"map_embed_url\":\"\",\"description\":\"Quick day hike with views over Kathmandu Valley.\",\"overview\":\"Accessible for families and short stays.\",\"faq\":[],\"coordinates\":[27.88464691403293,85.28655779228313]},{\"id\":\"25\",\"slug\":\"lamjung-gosaikunda-loop\",\"name\":\"Gosaikunda - Langtang Rim\",\"region\":\"Langtang\",\"difficulty\":\"Moderate\",\"duration\":9,\"altitude\":4380,\"price_range\":[400,900],\"best_season\":[\"Spring (Mar-May)\",\"Autumn (Sep-Nov)\"],\"permit_required\":true,\"highlights\":[\"Holy lakes\",\"Scenic ridgelines\"],\"itinerary\":[],\"images\":[\"gosaikunda-1\"],\"safety_tips\":[],\"map_embed_url\":\"\",\"description\":\"Lakes and ridgelines combining Langtang and Gosaikunda areas.\",\"overview\":\"Shorter moderate route with alpine lakes and views.\",\"faq\":[],\"coordinates\":[27.922317939551156,85.57702762176089]}]"));}}),
"[project]/src/lib/data.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "addTrek": (()=>addTrek),
    "deleteTrek": (()=>deleteTrek),
    "difficulties": (()=>difficulties),
    "getAllTreks": (()=>getAllTreks),
    "getFeaturedTreks": (()=>getFeaturedTreks),
    "getTrekBySlug": (()=>getTrekBySlug),
    "getTreksByAgency": (()=>getTreksByAgency),
    "regions": (()=>regions),
    "updateTrek": (()=>updateTrek)
});
// Load initial dataset from JSON (Nepal-only dataset)
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$treks$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/src/lib/treks.json (json)");
;
let treks = __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$treks$2e$json__$28$json$29$__["default"];
function getAllTreks() {
    return treks;
}
function getTrekBySlug(slug) {
    return treks.find((trek)=>trek.slug === slug);
}
function getTreksByAgency(agencyId) {
    return treks.filter((trek)=>trek.agencyId === agencyId);
}
function getFeaturedTreks(count) {
    return treks.slice(0, count);
}
async function addTrek(trek) {
    const id = String(Date.now());
    const newTrek = {
        id,
        ...trek
    };
    treks.push(newTrek);
    return newTrek;
}
async function updateTrek(id, patch, userRole, agencyId) {
    const idx = treks.findIndex((t)=>t.id === id);
    if (idx === -1) return undefined;
    const trek = treks[idx];
    // Permission check: admins can edit any trek, agencies can only edit their own
    if (userRole === 'agency' && trek.agencyId !== agencyId) {
        return undefined; // Unauthorized
    }
    treks[idx] = {
        ...treks[idx],
        ...patch
    };
    return treks[idx];
}
async function deleteTrek(id, userRole, agencyId) {
    const idx = treks.findIndex((t)=>t.id === id);
    if (idx === -1) return false;
    const trek = treks[idx];
    // Permission check: admins can delete any trek, agencies can only delete their own
    if (userRole === 'agency' && trek.agencyId !== agencyId) {
        return false; // Unauthorized
    }
    treks.splice(idx, 1);
    return true;
}
const difficulties = [
    'Easy',
    'Moderate',
    'Challenging',
    'Expert'
];
const regions = [
    ...new Set(treks.map((t)=>t.region))
];
}}),
"[project]/src/app/api/treks/route.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "DELETE": (()=>DELETE),
    "GET": (()=>GET),
    "POST": (()=>POST),
    "PUT": (()=>PUT)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/auth.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$data$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/data.ts [app-route] (ecmascript)");
;
;
;
async function GET() {
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json((0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$data$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getAllTreks"])());
}
async function POST(req) {
    try {
        const session = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["auth"])();
        // Check authentication
        if (!session?.user) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: 'Unauthorized'
            }, {
                status: 401
            });
        }
        const body = await req.json();
        // For agencies: automatically set agencyId, admins can specify
        if (session.user.role === 'agency') {
            body.agencyId = session.user.id; // Use user id as agency id
        }
        const newTrek = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$data$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["addTrek"])(body);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json(newTrek, {
            status: 201
        });
    } catch (err) {
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: 'Invalid body'
        }, {
            status: 400
        });
    }
}
async function PUT(req) {
    try {
        const session = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["auth"])();
        // Check authentication
        if (!session?.user) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: 'Unauthorized'
            }, {
                status: 401
            });
        }
        const { id, patch } = await req.json();
        // Permission check: agencies can only edit their own treks
        const updated = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$data$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["updateTrek"])(id, patch, session.user.role, session.user.id);
        if (!updated) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: session.user.role === 'agency' ? 'Forbidden or Not found' : 'Not found'
            }, {
                status: session.user.role === 'agency' ? 403 : 404
            });
        }
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json(updated);
    } catch (err) {
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: 'Invalid body'
        }, {
            status: 400
        });
    }
}
async function DELETE(req) {
    try {
        const session = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$auth$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["auth"])();
        // Check authentication
        if (!session?.user) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: 'Unauthorized'
            }, {
                status: 401
            });
        }
        const { id } = await req.json();
        // Permission check: agencies can only delete their own treks
        const ok = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$data$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["deleteTrek"])(id, session.user.role, session.user.id);
        if (!ok) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: session.user.role === 'agency' ? 'Forbidden or Not found' : 'Not found'
            }, {
                status: session.user.role === 'agency' ? 403 : 404
            });
        }
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: true
        });
    } catch (err) {
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: 'Invalid body'
        }, {
            status: 400
        });
    }
}
}}),

};

//# sourceMappingURL=%5Broot-of-the-server%5D__a6baa86a._.js.map